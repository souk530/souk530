CLI（コマンドラインインターフェイス）を使用した簡単な電卓アプリをPythonで作成します。このアプリは2桁以下の数値の入力を受け付け、結果の最大桁数を4桁に制限します。四則演算（加算、減算、乗算、除算）をサポートします。

```python
def get_input(prompt):
    while True:
        try:
            # 入力を受け取る
            user_input = input(prompt)
            # 入力を整数に変換
            number = int(user_input)
            # 2桁以下の数値かどうかをチェック
            if len(user_input) > 2:
                raise ValueError
            return number
        except ValueError:
            print("2桁以下の数値を入力してください。")

def calculate(a, b, operation):
    # 演算を実行
    if operation == '+':
        return a + b
    elif operation == '-':
        return a - b
    elif operation == '*':
        return a * b
    elif operation == '/':
        if b != 0:
            return a / b
        else:
            print("0で割ることはできません。")
            return None
    else:
        print("無効な演算です。")
        return None

def main():
    print("簡易電卓アプリへようこそ。終了するにはCtrl+Cを押してください。")

    while True:
        # 数値の入力を受け取る
        a = get_input("数値1 (2桁以下): ")
        b = get_input("数値2 (2桁以下): ")

        # 演算子の入力を受け取る
        operation = input("演算を選択してください (+, -, *, /): ")

        # 計算を実行
        result = calculate(a, b, operation)

        # 結果を表示
        if result is not None:
            # 結果の桁数が4桁を超える場合は調整
            result_str = str(result)
            if len(result_str) > 4:
                if '.' in result_str:
                    # 小数点が含まれている場合は、小数点以下を調整
                    result_str = result_str[:4]
                else:
                    # 整数の場合は単純に4桁に切り詰め
                    result_str = result_str[:4]
            print("結果: ", result_str)
        print("")

if __name__ == "__main__":
    main()
```

このプログラムは、ユーザーから2つの2桁以下の数値と演算子を入力として受け取り、選択した演算を行います。結果は最大で4桁まで表示されます。0での除算や無効な演算を入力した場合はエラーメッセージを表示します。プログラムを終了するには、Ctrl+Cを押します。

プログラムには、`main`関数以外にもいくつかの補助関数があります。これらの関数は、電卓アプリの様々な機能をサポートするために設計されています。以下に各関数の役割を説明します：

### `get_input(prompt)`

この関数は、ユーザーからの入力を受け取るために使用されます。具体的には、ユーザーに数値の入力を促し、その入力が2桁以下の数値であることを確認します。もしユーザーが2桁を超える数値を入力した場合、または数値以外の入力をした場合は、エラーメッセージを表示し、再度入力を求めます。このプロセスは、適切な入力が得られるまで繰り返されます。この関数は、適切な入力が得られた際にその数値を返します。

#### パラメータ:
- `prompt`: ユーザーに表示されるメッセージ。これにより、何を入力すべきかユーザーに指示します。

#### 戻り値:
- ユーザーから受け取った2桁以下の数値。

### `calculate(a, b, operation)`

この関数は、指定された2つの数値と演算子に基づいて計算を実行します。サポートされている演算子は加算（`+`）、減算（`-`）、乗算（`*`）、除算（`/`）です。関数は、選択された演算に応じて結果を計算し、その結果を返します。除算を行う場合、除数が0でないことを確認します。0で割ろうとすると、エラーメッセージを表示し、`None`を返します。

#### パラメータ:
- `a`: 演算に使用される最初の数値。
- `b`: 演算に使用される2番目の数値。
- `operation`: 実行する演算を示す文字列（`+`, `-`, `*`, `/`のいずれか）。

#### 戻り値:
- 演算の結果。無効な演算や0での除算を試みた場合は`None`を返します。

これらの関数は、電卓アプリの主な機能を支える重要な役割を果たします。`get_input`関数は、ユーザーからの適切な入力を保証し、`calculate`関数は、その入力に基づいて正しい計算を行います。これにより、プログラム全体が効率的かつ正確に動作することが保証されます。
